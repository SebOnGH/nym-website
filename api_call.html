<!DOCTYPE html>
<html>
  <head>
    <title>Exemple d'appel API avec fetch</title>
  </head>
  <body>
    <h1>Résultats de l'API :</h1>
    <div id="resultats"></div>
    <script>
      Promise.all([
        fetch('https://validator.nymtech.net/api/v1/status/mixnode/834/report'),
        fetch('https://validator.nymtech.net/api/v1/status/mixnode/834/reward-estimation'),
        fetch('https://validator.nymtech.net/api/v1/status/mixnode/834/avg_uptime'),
        fetch('https://validator.nymtech.net/api/v1/status/mixnode/834/status'),
        fetch('https://validator.nymtech.net/api/v1/status/mixnode/834/stake-saturation')
      ])
        .then(responses => Promise.all(responses.map(response => response.json())))
        .then(data => {
          const resultatsDiv = document.getElementById('resultats');
          let html = "";
          const report = data[0];
          const rewardEstimation = data[1];
          const avgUptime = data[2];
          const status = data[3];
          const stakeSaturation = data[4];
          html += `<p>mix_id: ${report.mix_id}</p>`;
          html += `<p>identity: ${report.identity}</p>`;
          html += `<p>last_day: ${report.last_day}</p>`;
          html += `<p>total_node_reward: ${rewardEstimation.total_node_reward ? rewardEstimation.total_node_reward : 'N/A'}</p>`;
          html += `<p>operator: ${rewardEstimation.operator ? rewardEstimation.operator : 'N/A'}</p>`;
          html += `<p>delegates: ${rewardEstimation.delegates ? rewardEstimation.delegates : 'N/A'}</p>`;
          html += `<p>operating_cost: ${rewardEstimation.operating_cost ? rewardEstimation.operating_cost : 'N/A'}</p>`;
          html += `<p>avg_uptime: ${avgUptime.avg_uptime ? avgUptime.avg_uptime : 'N/A'}</p>`;
          html += `<p>status: ${status.status ? status.status : 'N/A'}</p>`;
          html += `<p>saturation: ${stakeSaturation.saturation ? (stakeSaturation.saturation * 100).toFixed(2) + '%' : 'N/A'}</p>`;
          resultatsDiv.innerHTML = html;
        })
        .catch(error => {
          console.error('Erreur lors de la récupération des données', error);
        });
    </script>
  </body>
</html>
